---
import client from '@sanity/client'
import BaseLayout from '../../../layouts/Layout.astro'

import Bullet from '../../../components/blog/Bullet.astro'
import Paragraph from '../../../components/blog/Paragraph.astro'
import Strong from '../../../components/blog/Strong.astro'
import Link from '../../../components/blog/Link.astro'
import PostImage from '../../../components/blog/PostImage.astro'
import NerdCallout from '../../../components/blog/NerdCallout.astro'

export const sanity = client({
  projectId: import.meta.env.SANITY_PROJECT_ID,
  dataset: import.meta.env.SANITY_BASE,
  apiVersion: '2021-03-25',
  token: import.meta.env.SANITY_TOKEN,
  useCdn: true,
})

const query = `
  {
    "blogCardData": *[_type == 'blogPost'] | order(_updatedAt desc) {
        "id": _id,
        "featureImage": image.image.asset,
        "altTag": image.altTag,
        "titleTag": image.titleTag,
        "teaserCopy": description,
        "slug": slug.current,
        "tags": tags[]->{_id, tag},
        "category": category.category[0]
      }
  }
`

// const blogCardData = await sanity.fetch(query)
// console.log(blogCardData)
---

<BaseLayout title="Test">
  <div class="container">
    <h1>Marketing Blog</h1>
    <div class="post-container">
      <NerdCallout />
    </div>
  </div>
</BaseLayout>

<style lang="scss">
  .container {
    padding: 200px 12px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 80px;
    width: 100vw;
    height: 100vh;
  }

  .post-container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 80px;
    width: 100%;
    max-width: 800px;
  }
</style>