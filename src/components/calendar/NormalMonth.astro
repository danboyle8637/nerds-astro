---
import BlankDay from './days/BlankDay.astro'
import NormalDay from './days/NormalDay.astro'
import {  
  getToday,
  getCurrentDateElements,
  getCurrentYear,
  getCurrentMonth,
  getActiveMonthString,
  getTotalDaysArrayInGivenMonth,
  getBlankDaysAtBeginningOfMonth,
  getFirstDayOfWeekOfMonth, 
} from '../../utils/calendarFunctions'

const today = getToday();
const [currentMonth, currentDay, currentYear] = getCurrentDateElements()
const currentMonthString = getActiveMonthString(currentMonth);
const firstDay = getFirstDayOfWeekOfMonth(currentMonth, currentYear);
const blankDays = getBlankDaysAtBeginningOfMonth(firstDay);

const daysArray = getTotalDaysArrayInGivenMonth(currentMonth);
---

<div class="container">
  <div class="days-container">
    <BlankDay 
      daysArray={blankDays}
    />
    <NormalDay 
      type="date-picker"
      daysArray={daysArray}
      today={today}
      activeMonth={currentMonth}
      currentMonth={currentMonth}
      year={2022}
    />
  </div>
</div>

<style>
  .container {
    display: grid;
    grid-template-columns: 1fr;
    grid-auto-rows: min-content;
    gap: 20px;
    width: 100%;
    perspective: 1500px;
    perspective-origin: 50% 50%;
  }

  .days-container {
    padding-top: 6px;
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    grid-auto-rows: min-content;
    gap: 6px;
    transform: rotateX(-12px) rotateY(-12deg);
  }
</style>